<?xml version="1.0" encoding="UTF-8"?>
<features name="marketdata-persistence-feature" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.3.0 http://karaf.apache.org/xmlns/features/v1.3.0">

    <repository>mvn:org.hibernate/hibernate-osgi/${hibernate.version}/xml/karaf</repository>
    <repository>mvn:de.hf.dac.features/dac-base-features/${project.version}/xml/features</repository>

    <feature name="marketdata-domain-feature" version="${pom.version}">
        <feature version="${hibernate.version}">hibernate-envers</feature>
        <bundle>mvn:de.hf.dac.api/de.hf.dac.api.base/${project.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider.api/de.hf.dac.marketdataprovider.api.domain/${project.version}</bundle>
    </feature>

    <feature name="marketdata-persistence-feature" version="${pom.version}">
        <feature>dac-io-feature</feature>
        <feature>dac-springdata-feature</feature>
        <feature>marketdata-domain-feature</feature>
        <bundle>mvn:de.hf.dac.marketdataprovider.api/de.hf.dac.marketdataprovider.api.persistence/${project.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider/de.hf.dac.marketdataprovider.persistence/${project.version}</bundle>
    </feature>

    <feature name="marketdata-service-feature" version="${pom.version}">
        <feature>marketdata-persistence-feature</feature>
        <bundle>mvn:com.google.code.gson/gson/${gson.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider.api/de.hf.dac.marketdataprovider.api.service/${project.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider/de.hf.dac.marketdataprovider.service/${project.version}</bundle>
    </feature>

    <feature name="marketdata-restservice-feature" version="${pom.version}">
        <feature>dac-rest-base-feature</feature>
        <feature>marketdata-service-feature</feature>
        <bundle  dependency="true">mvn:de.hf.dac.marketdataprovider/de.hf.dac.marketdataprovider.runner/${project.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider.api/de.hf.dac.marketdataprovider.api.application/${project.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider/de.hf.dac.marketdataprovider.restservice/${project.version}</bundle>
        <bundle>mvn:de.hf.dac.marketdataprovider/de.hf.dac.marketdataprovider.application/${project.version}</bundle>
    </feature>

    <feature name="marketdata-features" version="${pom.version}">
        <feature>marketdata-restservice-feature</feature>
        <bundle>mvn:de.hf.dac/angular/${project.version}</bundle>
    </feature>

</features>